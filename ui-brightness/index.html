<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weird UI - Brightness slider using curtain</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Canvas Slider with Taskbar Inside -->
    <canvas id="canvas"></canvas>
    
    <!-- Taskbar Section -->
    <div class="taskbar" id="taskbar">
        <div class="taskbar-icon" id="brightness-icon">â˜€ï¸</div> <!-- Icon Brightness -->
        <div class="taskbar-icon">ğŸ”Š</div> <!-- Icon Volume -->
        <div class="taskbar-icon">ğŸ›œ</div> <!-- Icon Wi-Fi -->
        <div class="taskbar-icon">ğŸ”‹</div> <!-- Icon Battery -->
        <div class="taskbar-time">
            <div class="time" id="time">12:30 PM</div>
            <div class="date" id="date">11/01/2024</div>
        </div>
    </div>

    <script type="module">
        import { ImageLib } from './lib.js';
        import MatrixUtility from './matrix.js'; // Import matrix.js untuk animasi

        const canvas = document.getElementById('canvas');
        const brightnessIcon = document.getElementById('brightness-icon');
        const taskbar = document.getElementById('taskbar');
        const imageLib = new ImageLib('canvas');

        // Toggle canvas visibility and curtain animation on brightness icon click
        brightnessIcon.addEventListener('click', () => {
            if (canvas.style.display === 'none' || !canvas.style.display) {
                canvas.style.display = 'block';
                animateCurtainOpen();
            } else {
                animateCurtainClose();
            }
        });

        function animateCurtainOpen() {
            let curtainHeight = canvas.height;
            const openInterval = setInterval(() => {
                curtainHeight -= 10;
                if (curtainHeight <= 0) {
                    clearInterval(openInterval);
                } else {
                    MatrixUtility.applyCurtainEffect(imageLib, curtainHeight); // Gunakan matrix.js untuk animasi
                }
            }, 16); // sekitar 60fps
        }

        function animateCurtainClose() {
            let curtainHeight = 0;
            const closeInterval = setInterval(() => {
                curtainHeight += 10;
                if (curtainHeight >= canvas.height) {
                    clearInterval(closeInterval);
                    canvas.style.display = 'none';
                } else {
                    MatrixUtility.applyCurtainEffect(imageLib, curtainHeight); // Gunakan matrix.js untuk animasi
                }
            }, 16); // sekitar 60fps
        }

        // Update waktu dan tanggal secara real-time
        function updateTime() {
            const now = new Date();
            const hours = now.getHours() % 12 || 12;
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = now.getHours() >= 12 ? 'PM' : 'AM';
            const timeString = `${hours}:${minutes} ${ampm}`;
            const dateString = now.toLocaleDateString();

            document.getElementById('time').textContent = timeString;
            document.getElementById('date').textContent = dateString;
        }
        
        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>
